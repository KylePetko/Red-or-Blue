<!DOCTYPE html>
<html>
    <head>
<title>Red or Blue?</title>
  
	    <link rel="stylesheet" type="text/css" href="container.css">
  <link rel="shortcut icon" href="favicon.png" type="image/png">
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">

<meta content="utf-8" http-equiv="encoding">
<meta property="og:image" content="https://raw.githubusercontent.com/KylePetko/Red-or-Blue/master/fbImage.png" />
    <meta property="og:title" content="Is tomorrow a red or blue day?" />
<meta property="og:url" content="https://redorblue.kylepet.co" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
<!--Import Google Icon Font-->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!--Import materialize.css-->
      <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
      <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-133359397-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-133359397-3');
</script>



    </head>

<body bgcolor="white" text="black" link="#00ffff" vlink="green" alink="yellow">
<script>
    
var clientId = '44486980708-gsf41pp79ir2e66mqtn795v4ggo0ltbq.apps.googleusercontent.com'; //choose web app client Id, redirect URI and Javascript origin set to http://localhost
var apiKey = 'AIzaSyCIQTEHeJgecY8GIZrHBnbgFWu3enzr304'; //choose public apiKey, any IP allowed (leave blank the allowed IP boxes in Google Dev Console)
var userEmail = "lgsuhsd.org_tebqf0pqvog3p4s5flsmddg4u8@group.calendar.google.com"; //your calendar Id
var userTimeZone = "Los_Angeles"; //example "Rome" "Los_Angeles" ecc...
var maxRows = 10; //events to shown
var calName = ""; //name of calendar (write what you want, doesn't matter)
var isRed
var isPM = true
var isSchool = false
var scopes = 'https://www.googleapis.com/auth/calendar';
var setDay = false
    
//--------------------- Add a 0 to numbers
function padNum(num) {
    if (num <= 9) {
        return num;
    }
    return num;
}
//--------------------- end    
    
//--------------------- From 24h to Am/Pm
function AmPm(num) {
    if (num <= 12) { 
      isPM = false
      return  num; 
    }
    else{
//isPM is already true 
      return  padNum(num - 12);
    }
    
}
//--------------------- end    
//--------------------- num Month to String
function monthString(num) {
         if (num === "01") { return "JAN"; } 
    else if (num === "02") { return "FEB"; } 
    else if (num === "03") { return "MAR"; } 
    else if (num === "04") { return "APR"; } 
    else if (num === "05") { return "MAJ"; } 
    else if (num === "06") { return "JUN"; } 
    else if (num === "07") { return "JUL"; } 
    else if (num === "08") { return "AUG"; } 
    else if (num === "09") { return "SEP"; } 
    else if (num === "10") { return "OCT"; } 
    else if (num === "11") { return "NOV"; } 
    else if (num === "12") { return "DEC"; }
}
//--------------------- end
//--------------------- from num to day of week
function dayString(num){
         if (num == "1") { return "Monday" }
    else if (num == "2") { return "Tuesday" }
    else if (num == "3") { return "Wednesday" }
    else if (num == "4") { return "Thursday" }
    else if (num == "5") { return "Friday" }
    else if (num == "6") { return "Saturday" }
    else if (num == "0") { return "Sunday" }
}
//--------------------- end
//--------------------- client CALL
function handleClientLoad() {
    gapi.client.setApiKey(apiKey);
    checkAuth();
}
//--------------------- end
//--------------------- check Auth
function checkAuth() {
    gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
}
//--------------------- end
//--------------------- handle result and make CALL
function handleAuthResult(authResult) {
    if (authResult) {
        makeApiCall();
    }
}
//--------------------- end
//--------------------- API CALL itself
function makeApiCall() {
    var today = new Date(); //today date
    today.setDate(today.getDate() + 1);
    today.setHours(0,0,0,0);
    var tomorrow = new Date();
    tomorrow.setDate(tomorrow.getDate() + 1);
    tomorrow.setHours(23,59,59,999);
    gapi.client.load('calendar', 'v3', function () {
        var request = gapi.client.calendar.events.list({
            'calendarId' : userEmail,
            'timeZone' : userTimeZone, 
            'singleEvents': true, 
            'timeMin': today.toISOString(), //gathers only events not happened yet
            'timeMax' : tomorrow.toISOString(),
            'maxResults': maxRows, 
            'orderBy': 'startTime'});
    request.execute(function (resp) {
	    
	    
	    
            for (var i = 0; i < 1; i++) {
                var li = document.createElement('li');
                var item = resp.items[i];
                var classes = [];
		var str = ""
                var allDay = item.start.date? true : false;
                var startDT = allDay ? item.start.date : item.start.dateTime;
                var dateTime = startDT.split("T"); //split date from time
                var date = dateTime[0].split("-"); //split yyyy mm dd
                var startYear = date[0];
                var startMonth = monthString(date[1]);
                var startDay = date[2];
                var startDateISO = new Date(startMonth + " " + startDay + ", " + startYear + " 00:00:00");
                var startDayWeek = dayString(startDateISO.getDay());
                
                
                    
                if( allDay == true){ //change this to match your needs
                    
                    if(item.summary == "BLUE"  ){
                      isRed = false
                      isSchool = true
			    setDay = true
                    }
                    else if(item.summary == "RED") {
                      isRed = true
                      isSchool = true
			    setDay = true
                    }
                    if(item.summary == "RED"){
                      var str = [
                    '<p size="30 >',
                    startDayWeek, ' ',
                    startMonth, ' ',
                    startDay, ' ',
                    startYear, '</p><p size="30" class="red-text text-darken-2" >', "Tomorrow is a red day" , '</p>'
                    ];
document.title = "Tomorrow is red";
		    
		}
                    else if(item.summary == "BLUE"){
                      var str = [
                    '<p size="30 >',
                    startDayWeek, ' ',
                    startMonth, ' ',
                    startDay, ' ',
                    startYear, '</p><p size="30" class="blue-text text-darken-2" >', "Tomorrow is a blue day" , '</p>'
                    ];
		document.title = "Tomorrow is blue";
                    }
                    
                }
                
                else{

                  var AMPM
                    if(isPM)
                      AMPM = "PM"
                    else
                      AMPM = "PM"
                    var time = dateTime[1].split(":"); //split hh ss etc...
                    var startHour = AmPm(time[0]);
                    var startMin = time[1];
                    var str = [ //change this to match your needs
                        '<ul>',  item.summary, " @ " , startHour, ':', startMin, " " + AMPM , " tomorrow", "</ul>"
                        ];
                }
                
if(str == "" && !isSchool)
{
var str = [
                    '<p size="30 >',
                    startDayWeek, ' ',
                    startMonth, ' ',
                    startDay, ' ',
                    startYear, '</p><p size="30" class="black-text text-darken-2" >', "Tomorrow there is no school" , '</p>'
                    ];
document.title = "Tomorrow has no school";
}
                li.innerHTML = str.join('');
                li.setAttribute('class', classes.join(' '));
                document.getElementById('events').appendChild(li);
            
	   }
            
            
if (resp.items.length == 0){
	var lit = document.createElement('lit');
            	var str = [
                    '<p size="30 >',
                    startDayWeek, ' ',
                    startMonth, ' ',
                    startDay, ' ',
                    startYear, '</p><p size="30" class="black-text text-darken-2" >', "Tomorrow there is no school" , '</p>'
                    ];
                     document.title = "Tomorrow has no school";
            	lit.innerHTML = str.join('');
            	document.getElementById('events').appendChild(lit)
}
           
        });
    });
}
//--------------------- end
</script>
<script src='https://apis.google.com/js/client.js?onload=handleClientLoad'></script>
    


<span2 style="float:right">



<script type="text/javascript">
        function setToastDate() {
            n =  new Date();
            y = n.getFullYear();
            m = n.getMonth() + 1;
            d = n.getDate();
            document.getElementById("toast").innerHTML ="Today's date: " + m + "/" + d + "/" + y;
        }
        window.onload = setToastDate;
        </script>


<a id="toast" class="grey-text text-darken-2" >



</a>


</span2>


<span2 style="float:left;">
<a2  id="paypalBut" class="waves-effect waves-light btn"  onclick=" window.open('https://www.paypal.me/kailepetko','_blank')"><svg style="width:35px;height:35px" viewBox="0 0 24 24">
    <path fill="#FFFFFF" <path fill="#000000" d="M8.32,21.97C8.21,21.92 8.08,21.76 8.06,21.65C8.03,21.5 8,21.76 8.66,17.56C9.26,13.76 9.25,13.82 9.33,13.71C9.46,13.54 9.44,13.54 10.94,13.53C12.26,13.5 12.54,13.5 13.13,13.41C16.38,12.96 18.39,11.05 19.09,7.75C19.13,7.53 19.17,7.34 19.18,7.34C19.18,7.33 19.25,7.38 19.33,7.44C20.36,8.22 20.71,9.66 20.32,11.58C19.86,13.87 18.64,15.39 16.74,16.04C15.93,16.32 15.25,16.43 14.05,16.46C13.25,16.5 13.23,16.5 13,16.65C12.83,16.82 12.84,16.79 12.45,19.2C12.18,20.9 12.08,21.45 12.04,21.55C11.97,21.71 11.83,21.85 11.67,21.93L11.56,22H10C8.71,22 8.38,22 8.32,21.97V21.97M3.82,19.74C3.63,19.64 3.5,19.47 3.5,19.27C3.5,19 6.11,2.68 6.18,2.5C6.27,2.32 6.5,2.13 6.68,2.06L6.83,2H10.36C14.27,2 14.12,2 15,2.2C17.62,2.75 18.82,4.5 18.37,7.13C17.87,10.06 16.39,11.8 13.87,12.43C13,12.64 12.39,12.7 10.73,12.7C9.42,12.7 9.32,12.71 9.06,12.85C8.8,13 8.59,13.27 8.5,13.6C8.46,13.67 8.23,15.07 7.97,16.7C7.71,18.33 7.5,19.69 7.5,19.72L7.47,19.78H5.69C4.11,19.78 3.89,19.78 3.82,19.74V19.74Z"  />
</svg>
</a2>






</span2>



  <div id='content' class="container">

   <ul id = "noSchool"></ul>

    <ul id='events'></ul>
    
    </div>
    



    
    


    </body>
</html>
